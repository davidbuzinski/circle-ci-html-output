name: Use MATLAB Batch Licensing Token
on: [push]
env:
  MLM_LICENSE_TOKEN: ${{ secrets.MyToken }}
jobs:
  my-job:
    name: Run MATLAB Tests in Private Project
    runs-on: self-hosted
    steps:
      - name: Check out repository
        uses: actions/checkout@v4
      - name: Install MATLAB dependencies
        run: >
          export DEBIAN_FRONTEND=noninteractive &&
          sudo apt-get update &&
          sudo apt-get install -y $(wget -qO- https://raw.githubusercontent.com/mathworks-ref-arch/container-images/refs/heads/main/matlab-deps/r2024b/ubuntu24.04/base-dependencies.txt)
      - name: Set up MATLAB
        uses: matlab-actions/setup-matlab@v2
        with:
          release: R2024b
      - name: Run tests
        uses: matlab-actions/run-tests@v2
